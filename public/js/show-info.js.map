{"version":3,"sources":["ShowinfoController.js","ShowinfoApiService.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"show-info.js","sourcesContent":["mt2App.controller( 'ShowinfoController' , [ 'ShowinfoApiService' , '$log' , '$window' , function ( ShowinfoApiService , $log , $window ) {\n    var self = this;\n    self.api = ShowinfoApiService;\n\n    self.isLoaded = false;\n\n    self.recordId = null;\n    self.records = {};\n\n    self.suppressionReasons = [];\n    self.selectedReason = '';\n\n    /**\n     * Event Handlers\n     */\n\n    self.loadData = function ( $event ) {\n        $event.preventDefault();\n\n        self.api.getRecords( self.getType() , self.recordId , self.loadDataSuccessCallback , self.loadDataFailureCallback );\n        \n        self.isLoaded = true;\n    };\n\n    self.suppressRecord = function ( $event ) {\n        $event.preventDefault();\n\n        self.api.suppressRecord( self.recordId , self.selectedReason , self.suppressRecordSuccessCallback , self.suppressRecordFailureCallback );\n    }\n\n    /**\n     * Helpers\n     */\n\n    self.getType = function () {\n        var re = /\\d{1,}/;\n\n        return ( re.exec( self.recordId ) ? 'eid' : 'email' );\n    }\n\n    self.loadReasons = function () {\n        self.api.getSuppressionReasons( self.loadReasonsSuccessCallback , self.loadReasonsFailureCallback );\n    };\n\n    /**\n     * Callbacks\n     */\n\n    self.loadDataSuccessCallback = function ( response ) {\n        $log.log( 'Response:' );\n        $log.log( response );\n        self.records = response.data;\n    };\n\n    self.loadDataFailureCallback = function ( response ) {\n        $log.log( 'Load data failed...' );\n        $log.log( response );\n    };\n\n    self.loadReasonsSuccessCallback = function ( response ) {\n        self.suppressionReasons = response.data;\n    };\n\n    self.loadReasonsFailureCallback = function ( response ) {\n        $log.log( \"Failed to load reasons.\" );\n        $log.log( response );\n    };\n\n    self.suppressRecordSuccessCallback = function ( response ) {};\n    self.suppressRecordFailureCallback = function ( response ) {};\n} ] );\n","mt2App.service( 'ShowinfoApiService' , function ( $http , $log ) {\n    var self = this;\n\n    self.apiUrl = '/api/showinfo';\n    self.suppressionApiUrl = '/api/mt1/suppressionReason';\n\n    self.getRecords = function ( type , id , successCallback , failureCallback ) {\n        $http( {\n            \"method\" : \"GET\" ,\n            \"url\" : self.apiUrl ,\n            \"data\" : { \"id\" : id , \"type\" : type }\n        } ).then( successCallback , failureCallback );\n    };\n\n    self.getSuppressionReasons = function ( successCallback , failureCallback ) {\n        $http( {\n            \"method\" : \"GET\" ,\n            \"url\" : self.suppressionApiUrl\n        } ).then( successCallback , failureCallback );\n    };\n\n    self.suppressRecord = function ( id , reason , successCallback , failureCallback ) {\n        $http( {\n            \"method\" : \"POST\" ,\n            \"url\" : self.apiUrl ,\n            \"data\" : { \"id\" : id , \"reason\" : reason }\n        } ).then( successCallback , failureCallback );\n    };\n} );\n"],"sourceRoot":"/source/"}